(this["webpackJsonpmusic-recommender"]=this["webpackJsonpmusic-recommender"]||[]).push([[0],{57:function(e,t,c){},64:function(e,t,c){"use strict";c.r(t);var s=c(1),i=c.n(s),a=c(29),n=c.n(a),r=c(34),l=c(5),o=i.a.createContext(),d=c(10),u=c.n(d),j=function(){return{clientId:"05c656eb3f1e492ab8f82ea035eb1380",clientSecret:"b6e6d1da076f41eb8a28c95264fca0b0"}},m=c(2);function b(e){var t=Object(s.useContext)(o).playlist;return Object(m.jsxs)("div",{className:"hero-playlist-info",children:[Object(m.jsx)("div",{className:"hero-playlist-title",children:t.selectedPlaylist?t.selectedPlaylist.name:""}),Object(m.jsx)("div",{className:"hero-playlist-desc",children:t.selectedPlaylist?t.selectedPlaylist.description:""})]})}function O(e){var t={backgroundImage:"url(".concat(e.icon,")"),backgroundSize:"contain",backgroundColor:"lightgrey",borderRadius:"10px",backgroundBlendMode:"multiply"};return Object(m.jsx)("div",{style:t,className:"".concat((null===e||void 0===e?void 0:e.addStyle)?e.addStyle:"playlist-pic")})}function v(){var e=Object(s.useContext)(o).playlist;return Object(m.jsxs)("div",{className:"hero-playlist-container",children:[(null===e||void 0===e?void 0:e.selectedPlaylist)&&Object(m.jsx)(O,{addStyle:"hero-playlist-icon",icon:e.selectedPlaylist.images[0].url}),(null===e||void 0===e?void 0:e.selectedPlaylist)&&Object(m.jsx)(b,{})]})}function f(){return Object(m.jsxs)("div",{className:"track-header",children:[Object(m.jsx)("div",{className:"track-artist",children:"Artist"}),Object(m.jsx)("div",{className:"track-title",children:"Title"})]})}function h(e){var t=Math.floor(e/6e4),c=(e%6e4/1e3).toFixed(0);return t+":"+(c<10?"0":"")+c}function x(e){var t,c=Object(s.useContext)(o),i=c.FontAwesomeIcon,a=c.track,n=c.setTrack,r=c.setPlayer,l=(c.audio,c.setAudio);return Object(m.jsxs)("div",{className:"track",onClick:function(){n({selectedTrack:a.listOfTracksFromAPI[e.num].track,hasPreview:!!a.listOfTracksFromAPI[e.num].track.preview_url,listOfTracksFromAPI:a.listOfTracksFromAPI})},children:[e.hasPreview?Object(m.jsx)("button",{className:"track-play-icon",onClick:function(){l(new Audio(a.listOfTracksFromAPI[e.num].track.preview_url)),r({isPlaying:!0,state:"playing"})},children:Object(m.jsx)(i,{icon:["fas","play-circle"]})}):Object(m.jsx)("div",{style:{justifySelf:"center",alignSelf:"center"},children:Object(m.jsx)(i,{icon:["fas","times"]})}),Object(m.jsx)("div",{className:"track-artist",children:(null===(t=e.artists[0])||void 0===t?void 0:t.name)?e.artists[0].name:""}),Object(m.jsx)("div",{className:"track-title",children:(null===e||void 0===e?void 0:e.name)?e.name:""}),Object(m.jsx)("div",{style:{fontStyle:"italic"},children:e.explicit?"Explicit":""}),Object(m.jsx)("div",{className:"track-duration",children:h(e.duration)})]})}var k=c(18);function p(e){var t=Object(s.useContext)(o),c=t.FontAwesomeIcon,i=t.likedTrack,a=t.setLikedTrack;return Object(m.jsx)("div",{className:"track-like",onClick:function(){i.includes(e.id)?a(i.filter((function(t){return t!==e.id}))):i.length>=5?(a((function(e){return e.slice(1)})),a((function(t){return[].concat(Object(k.a)(t),[e.id])}))):a((function(t){return[].concat(Object(k.a)(t),[e.id])}))},children:i.includes(e.id)?Object(m.jsx)("button",{className:"like-button",children:Object(m.jsx)(c,{icon:["fas","heart"]})}):Object(m.jsx)("button",{className:"like-button",children:Object(m.jsx)(c,{icon:["far","heart"]})})})}function g(){var e=Object(s.useContext)(o).track,t=Object(s.useCallback)((function(){return e.listOfTracksFromAPI.map((function(t,c){var s,i,a,n,r,l,o,d,u;return Object(m.jsxs)("div",{className:"tracks",children:[Object(m.jsx)(x,{num:c,name:(null===(s=t.track)||void 0===s?void 0:s.name)?t.track.name:"",artists:(null===(i=t.track)||void 0===i?void 0:i.artists)?t.track.artists:"",album:(null===(a=t.track)||void 0===a?void 0:a.album)?t.track.album:"",id:(null===(n=t.track)||void 0===n?void 0:n.id)?t.track.id:"",popularity:(null===(r=t.track)||void 0===r?void 0:r.popularity)?t.track.popularity:"",explicit:(null===(l=t.track)||void 0===l?void 0:l.explicit)?t.track.explicit:"",duration:(null===(o=t.track)||void 0===o?void 0:o.duration_ms)?t.track.duration_ms:"",uri:(null===(d=t.track)||void 0===d?void 0:d.uri)?t.track.uri:"",hasPreview:!!t.track.preview_url},c),Object(m.jsx)(p,{num:c+e.listOfTracksFromAPI.length,id:(null===(u=t.track)||void 0===u?void 0:u.id)?t.track.id:""},c+e.listOfTracksFromAPI.length)]},c+2*e.listOfTracksFromAPI.length)}))}),[e]);return Object(s.useEffect)((function(){t()}),[t]),Object(m.jsx)("div",{className:"tracks-container",children:t()})}function y(){var e=Object(s.useContext)(o).track,t={backgroundImage:"url(".concat(e.selectedTrack.album.images[0].url,")"),backgroundSize:"cover",borderRadius:"20px"};return Object(m.jsx)("div",{style:t,className:"music-player-pic"})}function P(){var e,t,c=Object(s.useContext)(o).track,i=Object(s.useState)(""),a=Object(l.a)(i,2),n=a[0],r=a[1],d=Object(s.useState)(""),u=Object(l.a)(d,2),j=u[0],b=u[1];return Object(m.jsxs)("div",{className:"track-info",children:[Object(m.jsx)("div",{style:{textAlign:"right",gridColumnStart:"1",gridRowStart:"1"},children:"Album:"}),Object(m.jsx)("div",{className:"scrolling-album-container",children:Object(m.jsx)("span",{className:"scrolling-album",children:Object(m.jsx)("div",{ref:function(e){(null===e||void 0===e?void 0:e.scrollWidth)>290&&(null===e||void 0===e?void 0:e.scrollWidth)<340?b("animation-small"):(null===e||void 0===e?void 0:e.scrollWidth)>290?b("animation"):void 0!==e&&b("")},className:["fitWidth "+j],children:null===(e=c.selectedTrack)||void 0===e?void 0:e.album.name})})}),Object(m.jsx)("div",{style:{textAlign:"right",gridColumnStart:"1",gridRowStart:"2"},children:"Title:"}),Object(m.jsx)("div",{className:"scrolling-title-container",children:Object(m.jsx)("div",{className:"scrolling-title",children:Object(m.jsx)("div",{ref:function(e){(null===e||void 0===e?void 0:e.scrollWidth)>290&&(null===e||void 0===e?void 0:e.scrollWidth)<340?r("animation-small"):(null===e||void 0===e?void 0:e.scrollWidth)>290?r("animation"):void 0!==e&&r("")},className:["fitWidth "+n],children:null===(t=c.selectedTrack)||void 0===t?void 0:t.name})})})]})}function N(e){return Object(m.jsx)("div",{className:"time-track",style:{width:e.duration?e.currentTime/e.duration*100+"%":"0px"}})}function A(){var e,t,c,i,a,n=Object(s.useContext)(o),r=n.FontAwesomeIcon,d=n.track,u=n.player,j=n.setPlayer,b=n.audio,O=n.setAudio,v=Object(s.useState)(0),f=Object(l.a)(v,2),x=f[0],k=f[1],p=Object(s.useCallback)((function(){return Object(m.jsx)(N,{currentTime:x||0,duration:(null===b||void 0===b?void 0:b.duration)||0})}),[b,x]);return Object(s.useEffect)((function(){var e;"stopped"===u.state&&O(new Audio(null===(e=d.selectedTrack)||void 0===e?void 0:e.preview_url))}),[O,d.selectedTrack.preview_url,u.state]),Object(s.useEffect)((function(){return b.constructor!==Object&&(u.isPlaying?b.play():b.pause()),function(){b.constructor!==Object&&b.pause()}}),[u.isPlaying,b]),Object(s.useEffect)((function(){b.constructor!==Object&&b.addEventListener("timeupdate",(function(){k(b.currentTime)}))}),[b]),Object(s.useEffect)((function(){p()}),[p,null===b||void 0===b?void 0:b.currentTime,null===b||void 0===b?void 0:b.duration]),Object(m.jsxs)("div",{className:"music-player-controls ".concat(d.hasPreview?"preview":"no-preview"),children:[Object(m.jsx)("div",{className:"current-time",children:"0:00"}),Object(m.jsx)("div",{className:"time-track-container",children:p()}),Object(m.jsx)("div",{className:"track-duration",children:h(null===(e=d.selectedTrack)||void 0===e?void 0:e.duration_ms)}),Object(m.jsxs)("div",{className:"music-player-control-bar",children:[Object(m.jsx)("button",{className:"stop".concat("stopped"===u.state&&(null===(t=d.selectedTrack)||void 0===t?void 0:t.preview_url)?" active-button":"").concat((null===(c=d.selectedTrack)||void 0===c?void 0:c.preview_url)?"":" inactive"),onClick:function(){j({isPlaying:!1,state:"stopped"})},children:Object(m.jsx)(r,{icon:["fas","stop"]})}),(null===(i=d.selectedTrack)||void 0===i?void 0:i.preview_url)?Object(m.jsx)("button",{className:"play ".concat("playing"===u.state?"active-button":""),onClick:function(){j({isPlaying:!0,state:"playing"})},children:Object(m.jsx)(r,{icon:["fas","play"]})}):Object(m.jsx)("button",{className:"inactive",children:Object(m.jsx)(r,{icon:["fas","times"]})}),Object(m.jsx)("button",{className:"pause".concat("paused"===u.state?" active-button":"").concat((null===(a=d.selectedTrack)||void 0===a?void 0:a.preview_url)?"":" inactive"),onClick:function(){j({isPlaying:!u.isPlaying,state:"paused"})},children:Object(m.jsx)(r,{icon:["fas","pause"]})})]})]})}function C(){var e=Object(s.useContext)(o).track;return Object(m.jsx)("div",{className:"music-player-container",children:e.selectedTrack?[Object(m.jsx)(y,{},0),Object(m.jsx)(P,{},1),Object(m.jsx)(A,{},2)]:""})}function T(){var e=Object(s.useContext)(o).playlist;return Object(m.jsx)("div",{className:"hero-section-container ".concat(e.selectedPlaylist?"partial-watermark":"full-watermark"),children:e.selectedPlaylist?[Object(m.jsx)(v,{},0),Object(m.jsx)(f,{},1),Object(m.jsx)(g,{},2),Object(m.jsx)(C,{},3)]:Object(m.jsxs)("div",{className:"temporary-message",children:["Please choose a category and a playlist",Object(m.jsx)("br",{}),"to start browsing tracks."]})})}function w(e){return Object(m.jsx)("img",{src:e.icon,alt:e.name,className:"category-pic"})}function I(e){return Object(m.jsx)("div",{className:"category-info",children:function(e){switch(e){case"Dance/Electronic":return"Dance";case"Cooking & Dining":return"Cooking";case"Folk & Acoustic":return"Folk";default:return e}}(e.name)})}function F(e){var t=Object(s.useContext)(o),c=t.category,i=t.setCategory,a=t.setNavIndex;return Object(m.jsxs)("div",{className:"chooser-category-button",onClick:function(){i({selectedCategory:e.id,listOfCategoriesFromAPI:c.listOfCategoriesFromAPI}),a((function(e){return e+1}))},children:[Object(m.jsx)(w,{icon:e.icon,name:e.name}),Object(m.jsx)(I,{name:e.name,id:e.id,href:e.href})]})}function S(e){return Object(m.jsx)("div",{children:e.text})}var _=["categories","playlists"];function E(e,t){return(e%t+t)%t}function z(){var e=Object(s.useContext)(o),t=e.FontAwesomeIcon,c=e.navIndex,i=e.setNavIndex;return Object(m.jsxs)("div",{className:"chooser-nav",children:[Object(m.jsx)("button",{onClick:function(){i((function(e){return e-1}))},className:"nav-arrow-button end",children:Object(m.jsx)(t,{icon:["fas","angle-left"],className:"nav-arrow"})}),Object(m.jsx)("div",{className:"nav-text",children:Object(m.jsx)(S,{text:_[E(c,_.length)]})}),Object(m.jsx)("button",{onClick:function(){i((function(e){return e+1}))},className:"nav-arrow-button start",children:Object(m.jsx)(t,{icon:["fas","angle-right"],className:"nav-arrow"})})]})}function W(e){return Object(m.jsx)("div",{className:"playlist-info",children:e.name})}function B(e){var t=Object(s.useContext)(o),c=t.playlist,i=t.setPlaylist;return Object(m.jsxs)("div",{className:"chooser-playlist-button ".concat(c.selectedPlaylist.id===e.id?"focused-playlist":""),onClick:function(){i({selectedPlaylist:c.listOfPlaylistsFromAPI[e.num],listOfPlaylistsFromAPI:c.listOfPlaylistsFromAPI})},children:[Object(m.jsx)(O,{icon:e.icon,name:e.name}),Object(m.jsx)(W,{name:e.name,id:e.id,href:e.href})]})}function G(){var e=Object(s.useContext)(o),t=e.category,c=e.playlist,i=e.navIndex,a=Object(s.useCallback)((function(){switch(_[E(i,_.length)]){case"categories":if(t.listOfCategoriesFromAPI)return t.listOfCategoriesFromAPI.map((function(e,t){return Object(m.jsx)(F,{name:e.name,id:e.id,href:e.href,icon:e.icons[0].url},t)}));break;case"playlists":return c.listOfPlaylistsFromAPI?c.listOfPlaylistsFromAPI.map((function(e,t){var c;return Object(m.jsx)(B,{num:t,name:e.name,id:e.id,href:e.href,icon:(null===(c=e.images[0])||void 0===c?void 0:c.url)?e.images[0].url:"../../../public/spotify-logo.jpg"},t)})):Object(m.jsx)("div",{className:"category-missing-message missing-chooser-box-message",children:["Oops!",Object(m.jsx)("br",{},0),"You need to choose a category before selecting a playlist."]});default:return"Loading..."}}),[i,t,c]);return Object(s.useEffect)((function(){a()}),[i,a]),Object(m.jsxs)("div",{className:"chooser-container",children:[Object(m.jsx)(z,{}),Object(m.jsx)("div",{className:"chooser-container-items",children:a()})]})}function L(e){var t=Object(s.useContext)(o),c=t.FontAwesomeIcon,i=t.suggestions,a=t.track,n=t.setTrack,r=t.setAudio,l=t.setPlayer;t.audio;return Object(m.jsxs)("div",{className:"suggestion-track",onClick:function(){n({selectedTrack:i.listOfTracksFromAPI[e.num],hasPreview:!!i.listOfTracksFromAPI[e.num].preview_url,listOfTracksFromAPI:a.listOfTracksFromAPI})},children:[e.hasPreview?Object(m.jsx)("button",{className:"track-play-icon",onClick:function(){r(new Audio(i.listOfTracksFromAPI[e.num].preview_url)),l({isPlaying:!0,state:"playing"})},children:Object(m.jsx)(c,{icon:["fas","play-circle"],size:"2x"})}):Object(m.jsx)("div",{style:{justifySelf:"center",alignSelf:"center"},children:Object(m.jsx)(c,{icon:["fas","times"],size:"2x"})}),Object(m.jsx)("div",{className:"track-artist",children:e.artist}),Object(m.jsx)("div",{className:"track-title",children:(null===e||void 0===e?void 0:e.name)?e.name:""}),Object(m.jsx)("div",{children:e.album}),Object(m.jsx)("div",{className:"track-duration",children:h(e.duration)}),Object(m.jsx)("img",{src:"".concat(e.icon),alt:"".concat(e.album),className:"suggestion-icon"})]})}function R(){var e,t=Object(s.useContext)(o).suggestions,c=Object(s.useCallback)((function(){var e;return 0!==(null===(e=t.listOfTracksFromAPI)||void 0===e?void 0:e.length)?t.listOfTracksFromAPI.map((function(e,t){var c;return Object(m.jsx)(L,{num:t,name:e.name,artist:e.artists[0].name,album:e.album.name,id:e.id,href:e.href,duration:e.duration_ms,hasPreview:!!e.preview_url,icon:(null===(c=e.album.images[2])||void 0===c?void 0:c.url)?e.album.images[2].url:"../../../public/spotify-logo.jpg"},t)})):Object(m.jsx)("div",{className:"category-missing-message suggestion-message",children:"Once you like a song, suggestions will appear here."})}),[t]);return Object(s.useEffect)((function(){c()}),[c]),Object(m.jsxs)("div",{className:"suggestion-container",children:[Object(m.jsx)("h1",{children:"Suggestions"}),0!==(null===(e=t.listOfTracksFromAPI)||void 0===e?void 0:e.length)?Object(m.jsxs)("div",{className:"suggestions-header",children:[Object(m.jsx)("div",{className:"artist",children:"Artist"}),Object(m.jsx)("div",{className:"title",children:"Title"}),Object(m.jsx)("div",{className:"album",children:"Album"})]}):"",Object(m.jsx)("div",{className:"suggestion-tracks-container",children:c()})]})}var D=c(30),J=(c(57),c(31)),M=c(9),Y=c(8),q=c(32);M.b.add(Y.b,Y.a,Y.f,Y.e,Y.d,Y.g,Y.c,q.a,Y.h);var H=function(){var e=j(),t=Object(s.useState)({}),c=Object(l.a)(t,2),i=c[0],a=c[1],n=Object(s.useState)(""),r=Object(l.a)(n,2),d=r[0],b=r[1],O=Object(s.useState)(0),v=Object(l.a)(O,2),f=v[0],h=v[1],x=Object(s.useState)({selectedCategory:"",listOfCategoriesFromAPI:[]}),k=Object(l.a)(x,2),p=k[0],g=k[1],y=Object(s.useState)({selectedPlaylist:"",listofPlaylistsFromAPI:[]}),P=Object(l.a)(y,2),N=P[0],A=P[1],C=Object(s.useState)({selectedTrack:"",hasPreview:!1,listOfTracksFromAPI:[]}),w=Object(l.a)(C,2),I=w[0],F=w[1],S=Object(s.useState)([]),_=Object(l.a)(S,2),E=_[0],z=_[1],W=Object(s.useState)({listOfTracksFromAPI:[]}),B=Object(l.a)(W,2),L=B[0],M=B[1],Y=Object(s.useState)({isPlaying:!1,state:"stopped"}),q=Object(l.a)(Y,2),H=q[0],K=q[1];return Object(s.useEffect)((function(){u()("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+btoa(e.clientId+":"+e.clientSecret)},data:"grant_type=client_credentials"}).then((function(e){b(e.data.access_token)}))}),[e.clientId,e.clientSecret]),Object(s.useEffect)((function(){d&&u()("https://api.spotify.com/v1/browse/categories",{method:"GET",headers:{Authorization:"Bearer "+d},params:{country:"CA",limit:30}}).then((function(e){g({selectedCategory:"",listOfCategoriesFromAPI:e.data.categories.items})}))}),[d,g]),Object(s.useEffect)((function(){p.selectedCategory&&u()("https://api.spotify.com/v1/browse/categories/".concat(p.selectedCategory,"/playlists"),{method:"GET",headers:{Authorization:"Bearer "+d},params:{country:"CA",limit:30}}).then((function(e){A({selectedPlaylist:"",listOfPlaylistsFromAPI:e.data.playlists.items})}))}),[d,p,A]),Object(s.useEffect)((function(){N.selectedPlaylist&&u()("https://api.spotify.com/v1/playlists/".concat(N.selectedPlaylist.id,"/tracks"),{method:"GET",headers:{Authorization:"Bearer "+d},params:{country:"CA"}}).then((function(e){F({selectedTrack:"",listOfTracksFromAPI:e.data.items})}))}),[d,N.selectedPlaylist,F]),Object(s.useEffect)((function(){E.length>0&&u()("https://api.spotify.com/v1/recommendations",{method:"GET",headers:{Authorization:"Bearer "+d},params:{market:"CA",seed_tracks:E.join(","),seed_artists:"",seed_genres:""}}).then((function(e){M({listOfTracksFromAPI:e.data.tracks})}))}),[d,E]),Object(m.jsx)("div",{className:"main-section",children:Object(m.jsxs)(o.Provider,{value:{FontAwesomeIcon:J.a,navIndex:f,setNavIndex:h,category:p,setCategory:g,playlist:N,setPlaylist:A,track:I,setTrack:F,likedTrack:E,setLikedTrack:z,suggestions:L,setSuggestions:M,player:H,setPlayer:K,audio:i,setAudio:a},children:[Object(m.jsx)(D.a,{type:"cobweb",bg:!0}),Object(m.jsx)(G,{}),Object(m.jsx)(T,{}),Object(m.jsx)(R,{})]})})},K=document.getElementById("root");n.a.render(Object(m.jsx)(r.a,{basename:"/music-recommender",children:Object(m.jsx)(H,{})}),K)}},[[64,1,2]]]);
//# sourceMappingURL=main.6fa9b163.chunk.js.map